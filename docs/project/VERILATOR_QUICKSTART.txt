================================================================================
                Verilator ä»¿çœŸå¿«é€Ÿå¼€å§‹
================================================================================

ç°åœ¨æ”¯æŒä½¿ç”¨ Verilator è¿›è¡Œé«˜æ€§èƒ½ä»¿çœŸï¼

å·²åˆ›å»ºçš„ Verilator ç›¸å…³æ–‡ä»¶ï¼š
================================================================================

1. tb/eth_mac_rgmii_axi_tb.cpp          C++ testbench å°è£…
2. tb/Makefile.verilator                Verilator ä¸“ç”¨ Makefile  
3. tb/run_verilator.sh                  ä¸€é”®è¿è¡Œè„šæœ¬ï¼ˆå¯æ‰§è¡Œï¼‰
4. tb/VERILATOR_GUIDE.md                è¯¦ç»†ä½¿ç”¨æŒ‡å—

================================================================================
å¿«é€Ÿè¿è¡Œï¼ˆä¸‰ç§æ–¹å¼ï¼‰
================================================================================

æ–¹å¼1ï¼šä½¿ç”¨æ™ºèƒ½è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰
-----------------------------
cd /home/xuser/code_space/verilog/verilog/tb
./run_verilator.sh

æ–¹å¼2ï¼šä½¿ç”¨ Verilator ä¸“ç”¨ Makefile
-----------------------------------
cd /home/xuser/code_space/verilog/verilog/tb
make -f Makefile.verilator              # æ„å»ºå¹¶è¿è¡Œ
make -f Makefile.verilator build        # åªæ„å»º
make -f Makefile.verilator run          # åªè¿è¡Œ
make -f Makefile.verilator waves        # æŸ¥çœ‹æ³¢å½¢
make -f Makefile.verilator clean        # æ¸…ç†

æ–¹å¼3ï¼šä½¿ç”¨é€šç”¨ Makefile
------------------------
cd /home/xuser/code_space/verilog/verilog/tb
make SIM=verilator                      # è¿è¡Œä»¿çœŸ

================================================================================
å®‰è£… Verilatorï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
================================================================================

Ubuntu/Debian:
  sudo apt-get install verilator

Fedora/CentOS:
  sudo dnf install verilator

æ£€æŸ¥å®‰è£…:
  verilator --version

================================================================================
Verilator ä¼˜åŠ¿
================================================================================

é€Ÿåº¦ï¼š        æ¯” Icarus Verilog å¿« 10-100 å€ âš¡
é€‚ç”¨åœºæ™¯ï¼š    å¤§è§„æ¨¡ä»¿çœŸã€æ€§èƒ½å…³é”®éªŒè¯
è°ƒè¯•ï¼š        å¯ä½¿ç”¨ C++ è°ƒè¯•å™¨ (GDB)
SystemVerilog: å®Œæ•´æ”¯æŒ

æ€§èƒ½å¯¹æ¯”ï¼š
  Icarus Verilog:  ç¼–è¯‘ 5ç§’ + è¿è¡Œ 30ç§’ = 35ç§’
  Verilator:       ç¼–è¯‘ 20ç§’ï¼ˆé¦–æ¬¡ï¼‰+ è¿è¡Œ 5ç§’ = 25ç§’ï¼ˆé¦–æ¬¡ï¼‰
                   åç»­åªéœ€ 5ç§’ï¼

================================================================================
å¿«é€Ÿæµ‹è¯•
================================================================================

1. è¿›å…¥æµ‹è¯•ç›®å½•ï¼š
   cd /home/xuser/code_space/verilog/verilog/tb

2. è¿è¡Œ Verilator ä»¿çœŸï¼š
   ./run_verilator.sh

3. æŸ¥çœ‹è¾“å‡ºå’Œæ³¢å½¢ï¼š
   - ä»¿çœŸè¾“å‡ºä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯
   - æ³¢å½¢æ–‡ä»¶ï¼šeth_mac_rgmii_axi_tb.vcd
   - è‡ªåŠ¨æç¤ºæ˜¯å¦æ‰“å¼€ GTKWave

================================================================================
è¾“å‡ºç¤ºä¾‹
================================================================================

$ ./run_verilator.sh

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   Verilator ä»¿çœŸ - ä»¥å¤ªç½‘ MAC RGMII AXI         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[INFO] æ£€æŸ¥ä¾èµ–...
[INFO] æ£€æµ‹åˆ° Verilator: Verilator 4.228

[INFO] ä½¿ç”¨ Verilator æ„å»º...
=== ä½¿ç”¨ Verilator æ„å»º ===
ç¼–è¯‘æ–‡ä»¶åˆ—è¡¨:
  è®¾è®¡æ–‡ä»¶: 3 ä¸ª
  ä»¥å¤ªç½‘åº“: 16 ä¸ª
  AXI åº“: 5 ä¸ª

[SUCCESS] æ„å»ºå®Œæˆ

[INFO] è¿è¡Œä»¿çœŸ...
========================================
Verilator ä»¿çœŸå¼€å§‹
========================================
[INFO] åº”ç”¨å¤ä½...
[INFO] å¤ä½é‡Šæ”¾
[INFO] è¿è¡Œä»¿çœŸ...
[10000 ns] ä»¿çœŸè¿›åº¦: 10000 å‘¨æœŸ
...
========================================
ä»¿çœŸå®Œæˆ
æ€»å‘¨æœŸæ•°: 50000
ä»¿çœŸæ—¶é—´: 400000 ns
========================================

æ³¢å½¢æ–‡ä»¶å·²ä¿å­˜: eth_mac_rgmii_axi_tb.vcd

[SUCCESS] ä»¿çœŸå®Œæˆ

æ˜¯å¦æ‰“å¼€æ³¢å½¢æŸ¥çœ‹å™¨ï¼Ÿ(y/n) 

================================================================================
æ–‡ä»¶ç»“æ„
================================================================================

tb/
â”œâ”€â”€ eth_mac_rgmii_axi_tb.v      # Verilog testbenchï¼ˆåŸæœ‰ï¼‰
â”œâ”€â”€ eth_mac_rgmii_axi_tb.cpp    # C++ wrapper for Verilator â­ æ–°
â”œâ”€â”€ Makefile                     # é€šç”¨ Makefileï¼ˆæ”¯æŒä¸¤ç§ä»¿çœŸå™¨ï¼‰
â”œâ”€â”€ Makefile.verilator          # Verilator ä¸“ç”¨ â­ æ–°
â”œâ”€â”€ run_sim.sh                  # Icarus Verilog è„šæœ¬ï¼ˆåŸæœ‰ï¼‰
â”œâ”€â”€ run_verilator.sh            # Verilator è„šæœ¬ â­ æ–°
â”œâ”€â”€ VERILATOR_GUIDE.md          # è¯¦ç»†æŒ‡å— â­ æ–°
â””â”€â”€ README_TEST.md              # æµ‹è¯•æ–‡æ¡£ï¼ˆåŸæœ‰ï¼‰

================================================================================
å¸¸ç”¨å‘½ä»¤å¯¹ç…§
================================================================================

Icarus Verilog              Verilator
----------------            ----------------------
make                        make -f Makefile.verilator
make SIM=iverilog           make SIM=verilator
./run_sim.sh                ./run_verilator.sh
make waves                  make -f Makefile.verilator waves
make clean                  make -f Makefile.verilator clean

================================================================================
ä¸‹ä¸€æ­¥
================================================================================

1. ç«‹å³æµ‹è¯•ï¼š
   cd tb && ./run_verilator.sh

2. æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š
   cat tb/VERILATOR_GUIDE.md

3. æ€§èƒ½å¯¹æ¯”ï¼š
   # å…ˆç”¨ Icarus Verilog
   time make SIM=iverilog
   
   # å†ç”¨ Verilator
   time make SIM=verilator
   
   æ¯”è¾ƒè¿è¡Œæ—¶é—´ï¼

================================================================================
è·å–å¸®åŠ©
================================================================================

Makefile å¸®åŠ©ï¼š
  make -f Makefile.verilator help

å®Œæ•´æ–‡æ¡£ï¼š
  - tb/VERILATOR_GUIDE.md         è¯¦ç»†ä½¿ç”¨æŒ‡å—
  - tb/README_TEST.md             æµ‹è¯•æ€»ä½“æ–‡æ¡£
  - TESTING_GUIDE.md              å®Œæ•´æµ‹è¯•æŒ‡å—

åœ¨çº¿èµ„æºï¼š
  - https://verilator.org/guide/latest/
  - https://github.com/verilator/verilator

================================================================================

Verilator ä»¿çœŸç¯å¢ƒå·²å°±ç»ªï¼å¼€å§‹ä½“éªŒé«˜æ€§èƒ½ä»¿çœŸå§ï¼ ğŸš€

åˆ›å»ºæ—¥æœŸï¼š2025-10-06
================================================================================

